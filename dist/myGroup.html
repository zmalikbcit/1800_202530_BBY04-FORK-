<!DOCTYPE html>
<html lang="en">
  <head>
    <title>My Group</title>
    <meta name="comp1800 template" content="My 1800 App" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="images/image.ico" />
    <script type="module" crossorigin src="/assets/myGroup-CZlsVIe-.js"></script>
    <link rel="modulepreload" crossorigin href="/assets/firebaseConfig-D3CXmay8.js">
    <link rel="modulepreload" crossorigin href="/assets/bootstrap.esm-BEI9jhF-.js">
    <link rel="modulepreload" crossorigin href="/assets/app-hhu_teIN.js">
    <link rel="stylesheet" crossorigin href="/assets/bootstrap-D3vHCu1w.css">
    <link rel="stylesheet" crossorigin href="/assets/style-B3a1MbyO.css">
  </head>

  <body>
    <site-navbar></site-navbar>

    <main class="container py-4">
      <!-- Header -->
      <h1 id="groupName">Loading group…</h1>

      <!-- Group banner/image -->
      <img id="groupImage" class="img-fluid rounded mt-3 d-block mx-auto" src="" alt="Group image" />

      <!-- Meta -->
      <div class="mt-3 meta" id="groupMeta"></div>

      <!-- Admin -->
      <section id="adminPanel" class="mt-4 d-none">
        <h2 class="h4">Admin</h2>
        <!-- Rename Group -->
        <div class="d-flex gap-2 align-items-center">
          <input id="renameInput" type="text" class="form-control" placeholder="New group name" />
          <button id="saveRenameBtn" class="btn btn-primary">Rename</button>
        </div>
        <div class="meta mt-1">Only the group owner can rename the group or remove members.</div>

        <div class="mt-3 d-flex gap-2 align-items-center">
          <input id="joinKeyInput" type="text" class="form-control" placeholder="Join name (e.g., pantry-BCIT-04)" />
          <button id="saveJoinKeyBtn" class="btn btn-secondary">Save join code</button>
        </div>
        <div class="meta mt-1">Letters/numbers and dashes only (e.g., "pantry-BCIT-04").</div>
      </section>

      <!-- Actions -->
      <div class="mt-3 d-flex gap-2">
        <button id="openChatBtn" class="btn btn-primary">Open Group Chat</button>
        <div id="group-actions" style="margin-top: 20px;"></div>
        <button id="leaveBtn" class="btn btn-outline-danger d-none">Leave Group</button>
        <button id="deleteBtn" class="btn btn-outline-danger d-none">Delete Group</button>
      </div>

      <!-- Description -->
      <section class="mt-4">
        <h2 class="h4">About this group</h2>
        <p id="groupDescription">—</p>
      </section>

      <!-- Members -->
      <section class="mt-4">
        <h2 class="h4">Members</h2>
        <div id="memberChips"></div>
      </section>

      <!-- Pantry + Grocery (Responsive: side-by-side >=700px, stacked otherwise) -->
      <section class="mt-4">
        <div class="pantry-grid">
          <!-- Pantry Inventory -->
          <article class="card bg-light">
            <div class="card-body">
              <h5 class="title mb-1">Pantry Inventory</h5>
              <div class="meta time mb-2">Shared within this group</div>

              <!-- Add new item -->
              <form id="addPantryForm" class="pantry-inline-form" autocomplete="off">
                <input id="addItemName" class="form-control" type="text" placeholder="Item name (e.g., Eggs)" required />
                <input id="addItemAmount" class="form-control" type="number" min="0" step="1" placeholder="Amount" required />
                <input id="addItemUnit" class="form-control" type="text" placeholder="Unit (e.g., pcs, L, kg)" />
                <button class="btn btn-primary" type="submit">Add / Increase</button>
              </form>

              <!-- Table -->
              <div class="table-responsive mt-3">
                <table class="table pantry-table" id="pantryTable" aria-label="Pantry table">
                  <thead>
                    <tr>
                      <th>Item</th>
                      <th class="text-end">Amount</th>
                      <th>Unit</th>
                      <th class="text-end">Baseline <span class="meta">(admin)</span></th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="pantryTbody"></tbody>
                </table>
              </div>
            </div>
          </article>

          <!-- Grocery Checklist -->
          <article class="card bg-light">
            <div class="card-body">
              <h5 class="title mb-1">Grocery Checklist</h5>
              <div class="meta time mb-2">Auto-adds items when amount &lt; baseline</div>
              <ul id="groceryList" class="grocery-list"></ul>
              <div class="d-flex gap-2 mt-2">
                <button id="clearCheckedBtn" class="btn btn-outline-secondary">Clear checked</button>
              </div>
            </div>
          </article>
        </div>
      </section>
    </main>

    <!-- Templates -->
    <template id="memberChipTemplate">
      <span class="member-chip">
        <img class="avatar" alt="member avatar" />
        <span class="name">Member Name</span>
        <span class="role meta"></span>
        <button class="remove" title="Remove user" aria-label="Remove user">✕</button>
      </span>
    </template>

    <site-footer></site-footer>

    <!-- App scripts -->
  </body>
</html>
